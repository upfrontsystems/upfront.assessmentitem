<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      i18n:domain="plone.z3cform"
      tal:omit-tag="">

<metal:form metal:define-macro="form">

    <div class="portalMessage"
        tal:condition="view/status" tal:content="view/status">
    </div>

    <div tal:repeat="error view/widgets/errors">
        <span tal:content="error/render">error</span>
        <span tal:content="error/widget/id">widget</span>
    </div>

    <form action="." method="post" id="add-question-form"
        tal:attributes="name view/formname;
                        action request/getURL; enctype view/enctype;
                        class view/kssformname">

        <div tal:define="widget nocall:view/form_instance/widgets/IBasic.title">
            <metal:block use-macro="context/@@ploneform-macros/field" />
        </div>
        
        <div tal:define="widget nocall:view/form_instance/widgets/questiontype">
            <metal:block use-macro="context/@@ploneform-macros/field" />
        </div>

        <div tal:define="widget nocall:view/form_instance/widgets/question">
            <metal:block use-macro="context/@@ploneform-macros/field" />
        </div>

        <div tal:define="widget nocall:view/form_instance/widgets/IMarks.marks">
            <metal:block use-macro="context/@@ploneform-macros/field" />
        </div>

        <div tal:define="widget nocall:view/form_instance/widgets/IResponseTime.responsetime">
            <metal:block use-macro="context/@@ploneform-macros/field" />
        </div>
       
        <div id="answer_listing">
        </div> 
        <input type="button" id ="add_answer" value="Add a multiple-choice answer"/>

        <!-- used as scratchpad, a place where ajax result is placed and then moved-->
        <div id="answer_template" class="hidden">
        </div>

        <div class="formControls">
        	<input type="submit" value="Save" class="submit-widget button-field context" name="form.buttons.save" id="form-buttons-save">
        	<input type="submit" value="Cancel" class="submit-widget button-field standalone" name="form.buttons.cancel" id="form-buttons-cancel">
        </div>

    </form>

    <!-- Hidden link to a view URL which will render the view containing the snippet for comments -->
    <div id="add_answer_ajaxlink">
        <a rel="nofollow" style="display:none" 
           tal:attributes="href string:${context/absolute_url}/++add++upfront.assessmentitem.content.answer" ></a>
    </div>
 

</metal:form>
</html>
